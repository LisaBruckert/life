<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of v_lifeConnectomePreprocess</title>
  <meta name="keywords" content="v_lifeConnectomePreprocess">
  <meta name="description" content="% v_lifeConnectomePreprocess.m">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">validate</a> &gt; v_lifeConnectomePreprocess.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for validate&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>v_lifeConnectomePreprocess
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>% v_lifeConnectomePreprocess.m</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">% v_lifeConnectomePreprocess.m

 Illustrate how to preprocess a connectome (fg) to be constrained within a
 region of interest and within the cortex.

 We will show how to clip a fiber grou so that it only contains fibers
 that are within the volume defined by an ROI, that are not short and that
 start and end in cortex.

 For this example we use the volume defined by the connectome to constrain
 the fibers.

 See also:

 Franco (C) 2012 Stanford VISTA team.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% v_lifeConnectomePreprocess.m</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% Illustrate how to preprocess a connectome (fg) to be constrained within a</span>
0004 <span class="comment">% region of interest and within the cortex.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% We will show how to clip a fiber grou so that it only contains fibers</span>
0007 <span class="comment">% that are within the volume defined by an ROI, that are not short and that</span>
0008 <span class="comment">% start and end in cortex.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% For this example we use the volume defined by the connectome to constrain</span>
0011 <span class="comment">% the fibers.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% See also:</span>
0014 <span class="comment">%</span>
0015 <span class="comment">% Franco (C) 2012 Stanford VISTA team.</span>
0016 
0017 <span class="comment">%% Start loading the data</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% At some point, we will put these fe structures into VISTADATA.</span>
0020 <span class="comment">% For now, you can compute them, leave them in the feGet(fe,'savedir'), and load them</span>
0021 <span class="comment">% up for testing.</span>
0022 
0023 <span class="comment">% Basic directories</span>
0024 <span class="keyword">if</span> ispc,  basePath = fullfile(<span class="string">'\\red.stanford.edu'</span>,<span class="string">'biac2-wandell6'</span>);
0025 <span class="keyword">else</span>      basePath = fullfile(<span class="string">'/biac2'</span>,<span class="string">'wandell6'</span>);
0026 <span class="keyword">end</span>
0027 dataRootPath  = fullfile(basePath,<span class="string">'data'</span>,<span class="string">'frk'</span>,<span class="string">'life_dti'</span>,<span class="string">'FP20120420'</span>);
0028 subfolders    = fullfile(<span class="string">'150dirs_b1000_1'</span>);
0029 baseDir       = fullfile(dataRootPath,subfolders);
0030 saveDir       = fullfile(baseDir,<span class="string">'LiFE'</span>);
0031 dtFile        = fullfile(baseDir,<span class="string">'dt6.mat'</span>);
0032 dwiFile       = fullfile(dataRootPath,<span class="string">'raw'</span>,<span class="string">'0009_01_DWI_2mm150dir_2x_b1000_aligned_trilin.nii.gz'</span>);
0033 fgFileName    = fullfile(baseDir,<span class="string">'fibers'</span>,<span class="string">'whole_brain_MRTRIX'</span>,<span class="string">'WholeBrainFG_MRTRIX.mat'</span>);
0034 <span class="comment">% This is the fiber group that I will use to generate the Volume ROI to</span>
0035 <span class="comment">% constrain the fibers, I am working on the optic radiation so I load the</span>
0036 <span class="comment">% occipital fibergroup</span>
0037 fgRoiName     = fullfile(saveDir,<span class="string">'fg'</span>,<span class="string">'right_hemisphere_occipital_MRTRIX_FG.mat'</span>); 
0038 cortexFile    = fullfile(dataRootPath,<span class="string">'t1'</span>,<span class="string">'t1_class.nii.gz'</span>);
0039 
0040 <span class="comment">% Load the fiber group to geenrat ethe Volume ROI</span>
0041 disp(<span class="string">'Loading the occipital lobe fiber group...'</span>)
0042 fg = dtiLoadFiberGroup(fgRoiName);
0043 
0044 <span class="comment">% Generate a volume ROI from the fiber group.</span>
0045 tic
0046 fprintf(<span class="string">'[%s] Generating an ROI for the occipital lobe...\n'</span>,mfilename)
0047 volRoi        = dtiNewRoi(<span class="string">'volumeRoi'</span>,rand(3,1),[]);
0048 volRoi.coords = fefgGet(fg,<span class="string">'unique acpc coords'</span>);
0049 volRoi        = dtiRoiClean(volRoi);
0050 dtiWriteRoi(volRoi,fullfile(saveDir,<span class="string">'rois'</span>,<span class="string">'volumeRoi'</span>));
0051 clear fg;
0052 fprintf(<span class="string">'done in %2.3f. ROI size %ix%i\n'</span>,toc,size(volRoi.coords))
0053 keyboard
0054 <span class="comment">% Load the fiber group</span>
0055 disp(<span class="string">'Loading the whole brain fiber group...'</span>)
0056 fg = dtiLoadFiberGroup(fgFileName);
0057 
0058 <span class="comment">% Now restric the fibers to be withint he White-matter and the ROI</span>
0059 fg = feConnectomePreprocess(fg, volRoi, cortexFile, [5,6]);
0060 fg.name = <span class="string">'WholeBrainFG_MRTRIX_preprocessed'</span>;
0061 
0062 <span class="comment">%% Initialize the Connectome</span>
0063 fe     = feConnectomeInit(dwiFile,dtFile,fg);
0064 
0065 keyboard</pre></div>
<hr><address>Generated on Tue 01-Jul-2014 11:25:56 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>